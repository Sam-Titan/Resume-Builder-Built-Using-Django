{% extends 'main.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<link rel="stylesheet" href="{% static 'styles/style.css' %}">
<div class="container mt-5">
    <div class="card shadow-lg p-4 rounded border-0">
        <h1 class="text-center text-primary fw-bold">
            ATS Score for {{ candidate }}
        </h1>
        <p class="text-center fs-4">
            Your ATS Score: 
            <strong class="text-success fs-2">{{ ats_score }}%</strong>
        </p>

        <div class="row g-4">
            <div class="col-md-6">
                <div class="p-3 bg-light rounded">
                    <h3 class="text-secondary">
                        <i class="fas fa-check-circle text-success"></i> Matched Keywords
                    </h3>
                    <p class="text-muted">
                        {% for keyword in matched_keywords %}
                            <span class="badge bg-success me-1">{{ keyword }}</span>
                        {% empty %}
                            <span class="text-danger">No keywords matched.</span>
                        {% endfor %}
                    </p>
                </div>
            </div>

            <div class="col-md-6">
                <div class="p-3 bg-light rounded">
                    <h3 class="text-secondary">
                        <i class="fas fa-list text-primary"></i> Total Keywords Considered
                    </h3>
                    <p class="text-muted">
                        {% for keyword in total_keywords %}
                            <span class="badge bg-primary me-1">{{ keyword }}</span>
                        {% empty %}
                            <span class="text-danger">No keywords found.</span>
                        {% endfor %}
                    </p>
                </div>
            </div>
        </div>

        <hr>

        <div class="row g-4">
            <!-- Skills -->
            <div class="col-md-6">
                <h3 class="text-primary">
                    <i class="fas fa-lightbulb"></i> Skills
                </h3>
                <ul class="list-group shadow-sm">
                    {% for skill in skills %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ skill.name }}
                            <span class="badge bg-info">{{ skill.proficiency_level }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Experience -->
            <div class="col-md-6">
                <h3 class="text-primary">
                    <i class="fas fa-briefcase"></i> Experience
                </h3>
                <ul class="list-group shadow-sm">
                    {% for exp in experiences %}
                        <li class="list-group-item">
                            <strong>{{ exp.role }}</strong> at {{ exp.company_name }} <br>
                            <small class="text-muted">({{ exp.start_date }} - {{ exp.end_date|default:'Present' }})</small>
                        </li>
                    {% empty %}
                        <li class="list-group-item text-danger">No experience added.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <hr>

        <div class="row g-4">
            <!-- Education -->
            <div class="col-md-6">
                <h3 class="text-primary">
                    <i class="fas fa-graduation-cap"></i> Education
                </h3>
                <ul class="list-group shadow-sm">
                    {% for edu in education %}
                        <li class="list-group-item">
                            <strong>{{ edu.degree }}</strong> in {{ edu.field_of_study }} <br>
                            <small class="text-muted">{{ edu.school_name }}</small>
                        </li>
                    {% empty %}
                        <li class="list-group-item text-danger">No education details found.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Projects -->
            <div class="col-md-6">
                <h3 class="text-primary">
                    <i class="fas fa-folder-open"></i> Projects
                </h3>
                <ul class="list-group shadow-sm">
                    {% for project in projects %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <strong>{{ project.title }}</strong>
                            <a href="{{ project.url }}" target="_blank" class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-external-link-alt"></i> View
                            </a>
                        </li>
                    {% empty %}
                        <li class="list-group-item text-danger">No projects added.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <hr>

        <div class="row g-4">
            <!-- Certifications -->
            <div class="col-md-6">
                <h3 class="text-primary">
                    <i class="fas fa-certificate"></i> Certifications
                </h3>
                <ul class="list-group shadow-sm">
                    {% for cert in certifications %}
                        <li class="list-group-item">
                            <strong>{{ cert.title }}</strong>
                            <small class="text-muted">(Issued by {{ cert.issuer }})</small>
                        </li>
                    {% empty %}
                        <li class="list-group-item text-danger">No certifications found.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Awards -->
            <div class="col-md-6">
                <h3 class="text-primary">
                    <i class="fas fa-trophy"></i> Awards
                </h3>
                <ul class="list-group shadow-sm">
                    {% for award in awards %}
                        <li class="list-group-item">
                            <strong>{{ award.title }}</strong>
                            <small class="text-muted">({{ award.date_received }})</small>
                        </li>
                    {% empty %}
                        <li class="list-group-item text-danger">No awards listed.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="{% url 'home' %}" class="btn btn-lg btn-outline-primary">
                <i class="fas fa-home"></i> Back to Home
            </a>
        </div>
    </div>
</div>

{% endblock content %}
